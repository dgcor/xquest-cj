{
  "action": {
    "name": "resource.add",
    "id": "settingsGFX",
    "ignorePrevious": true
  },
  "menu": {
    "id": "settingsGFX",
    "font": "font",
    "focus": true,
    "position": ["center", 80],
    "anchor": "none",
    "horizontalAlign": "center",
    "verticalPad": 10,
    "items": [
      {
        "binding": ["%game.windowedSize.x%", "%game.windowedSize.y%"],
        "format": "Window size: [1]x[2]",
        "onClick": {
          "name": "switch",
          "param": "%game.windowedSize%",
          "case": [
            {
              "value": [320, 240],
              "action": { "name": "game.setProperty", "property": "size", "value": [640, 480] }
            },
            {
              "value": [640, 480],
              "action": { "name": "game.setProperty", "property": "size", "value": [800, 600] }
            },
            {
              "value": [800, 600],
              "action": { "name": "game.setProperty", "property": "size", "value": [1024, 768] }
            },
            {
              "value": [1024, 768],
              "action": { "name": "game.setProperty", "property": "size", "value": [640, 480] }
            }
          ],
          "default": { "name": "game.setProperty", "property": "size", "value": [640, 480] }
        }
      },
      {
        "executeAction": {
          "name": "if.equal",
          "param1": "%game.stretchToFit%",
          "param2": true,
          "then": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Stretch to Fit: On" },
          "else": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Stretch to Fit: Off" }
        },
        "onClick": {
          "name": "if.equal",
          "param1": "%game.stretchToFit%",
          "param2": false,
          "then": [
            { "name": "game.setProperty", "property": "stretchToFit", "value": true },
            { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Stretch to Fit: On" }
          ],
          "else": [
            { "name": "game.setProperty", "property": "stretchToFit", "value": false },
            { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!","text": "Stretch to Fit: Off" }
          ]
        }
      },
      {
        "executeAction": {
          "name": "if.equal",
          "param1": "%game.keepAR%",
          "param2": true,
          "then": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Keep Ratio: On" },
          "else": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Keep Ratio: Off" }
        },
        "onClick": {
          "name": "if.equal",
          "param1": "%game.keepAR%",
          "param2": false,
          "then": [
            { "name": "game.setProperty", "property": "keepAR", "value": true },
            { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Keep Ratio: On" }
          ],
          "else": [
            { "name": "game.setProperty", "property": "keepAR", "value": false },
            { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Keep Ratio: Off" }
          ]
        }
      },
      {
        "executeAction": {
          "name": "if.equal",
          "param1": "%game.smoothScreen%",
          "param2": true,
          "then": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Smooth Screen: On" },
          "else": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Smooth Screen: Off" }
        },
        "onClick": {
          "name": "if.equal",
          "param1": "%game.smoothScreen%",
          "param2": false,
          "then": [
            { "name": "game.setProperty", "property": "smoothScreen", "value": true },
            { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Smooth Screen: On" }
          ],
          "else": [
            { "name": "game.setProperty", "property": "smoothScreen", "value": false },
            { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Smooth Screen: Off" }
          ]
        }
      },
      {
        "binding": "%shader%",
        "format": "Shader: [1]",
        "onClick": {
          "name": "switch",
          "param": "%shader%",
          "case": [
            {
              "value": "default",
              "action": [
                { "name": "load", "file": "res/shaders/lanczos.json" },
                { "name": "variable.set", "key": "shader", "value": "lanczos" }
              ]
            },
            {
              "value": "lanczos",
              "action": [
                { "name": "load", "file": "res/shaders/scale4xhq.json" },
                { "name": "variable.set", "key": "shader", "value": "scale4xhq" }
              ]
            },
            {
              "value": "scale4xhq",
              "action": [
                { "name": "load", "file": "res/shaders/xbrz4x.json" },
                { "name": "variable.set", "key": "shader", "value": "xbrz4x" }
              ]
            },
            {
              "value": "xbrz4x",
              "action": [
                { "name": "load", "file": "res/shaders/default.json" },
                { "name": "variable.set", "key": "shader", "value": "default" }
              ]
            }
          ],
          "default": "default"
        }
      },
      {
        "executeAction": {
          "name": "if.equal",
          "param1": "%game.frameRate%",
          "param2": 0,
          "then": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "text": "Framerate Limit: Off" },
          "else": { "name": "menu.setText", "id": "settingsGFX", "index": "!menuIdx!", "binding": "%game.frameRate%", "format": "Framerate Limit: [1]" }
        },
        "onClick": {
          "name": "switch",
          "param": "%game.frameRate%",
          "case": [
            {
              "value": 0,
              "action": [
                { "name": "game.setProperty", "property": "frameRate", "value": 30 },
                {
                  "name": "menu.setText",
                  "id": "settingsGFX",
                  "index": "!menuIdx!",
                  "binding": "%game.frameRate%",
                  "format": "Framerate Limit: [1]"
                }
              ]
            },
            {
              "value": 30,
              "action": [
                { "name": "game.setProperty", "property": "frameRate", "value": 60 },
                {
                  "name": "menu.setText",
                  "id": "settingsGFX",
                  "index": "!menuIdx!",
                  "binding": "%game.frameRate%",
                  "format": "Framerate Limit: [1]"
                }
              ]
            },
            {
              "value": 60,
              "action": [
                { "name": "game.setProperty", "property": "frameRate", "value": 120 },
                {
                  "name": "menu.setText",
                  "id": "settingsGFX",
                  "index": "!menuIdx!",
                  "binding": "%game.frameRate%",
                  "format": "Framerate Limit: [1]"
                }
              ]
            },
            {
              "value": 120,
              "action": [
                { "name": "game.setProperty", "property": "frameRate", "value": 0 },
                {
                  "name": "menu.setText",
                  "id": "settingsGFX",
                  "index": "!menuIdx!",
                  "text": "Framerate Limit: Off"
                }
              ]
            }
          ],
          "default": { "name": "game.setProperty", "property": "frameRate", "value": 60 }
        }
      },
      {
        "text": "Back",
        "onClick": { "name": "resource.pop" }
      }
    ]
  },
  "replaceVars": "value",
  "inputEvent": {
    "gameInputEvent": ["enter", "esc", "space", "settings"],
    "action": { "name": "menu.click", "id": "settingsGFX", "index": "|$.settingsGFX.itemCount - 1|" }
  }
}